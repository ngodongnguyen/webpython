{%extends 'layout/base.html'%}
{%block content%}

<!-- Hero Section -->
<div class="hc-banner">
    <div class="container">
        <div class="row">
            <div class="col-lg-5">
                <div class="hc-banner-content">
                    <h2 class="wow fadeInUp" data-wow-duration="1.3s" data-wow-delay="0.2s">Phòng mạch Trung
                        Thành
                    </h2>
                    <h1 class="wow fadeInUp" data-wow-duration="1.3s" data-wow-delay="0.5s">Đặt lịch hẹn trực
                        tuyến với bác sỹ chuyên gia</h1>
                    <div class="hc-banner-box wow fadeInUp" data-wow-duration="1.3s" data-wow-delay="0.8s">
                        <p>
                            Thành lập năm 2010, Phòng Khám Medic Dĩ An tự hào là thương hiệu phòng khám có bề dầy 10 năm
                            kinh nghiệm chăm sóc và phục vụ khách hàng.
                        </p>
                    </div>
                    <a href="javascript:;" class="hc-btn wow fadeInUp" data-wow-duration="1.3s" data-wow-delay="1s">Tìm
                        hiểu thêm</a>
                </div>
            </div>

            <div class="col-lg-7">
                <div class="hc-banner-img">
                    <img src="https://res.cloudinary.com/ouweb/image/upload/v1734447050/webpython/odhm6sm9nffosvptqq1i.jpg"
                        alt="image" />
                </div>
            </div>
        </div>

        <div class="hc-banner-shape">
            <span></span>
        </div>
    </div>
</div>
<div class="hc-about hc-spacer-top hc-spacer-bottom" id="about">
    <div class="container">
        <div class="row">
            <div class="col-lg-5 offset-lg-1">
                <div class="hc-about-img">
                    <div class="hc-image-style">
                        <img src="https://res.cloudinary.com/ouproject/image/upload/v1639921915/img/about/about_pbzqmw.jpg"
                            alt="about" />
                    </div>
                </div>
            </div>

            <div class="col-lg-5">
                <div class="hc-about-content">
                    <div class="hc-heading-wrap">
                        <h2 class="hc-sub-heading">Về chúng tôi</h2>
                        <h1 class="hc-heading">
                            Sức khoẻ của bạn là sứ mệnh của chúng tôi
                        </h1>
                    </div>
                    <ul class="nav hc-tab-list">
                        <li class="nav-item">
                            <a class="active" data-toggle="tab" href="#work">Công việc</a>
                        </li>
                        <li class="nav-item">
                            <a id="profile-tab" data-toggle="tab" href="#mission">Nhiệm vụ</a>
                        </li>
                        <li class="nav-item">
                            <a id="profile-tab" data-toggle="tab" href="#achievement">Thành tựu</a>
                        </li>
                    </ul>
                    <div class="tab-content hc-tab-content">
                        <div class="tab-pane fade show active" id="work">
                            Chúng tôi luôn sẵn sàng chăm sóc bạn ân cần như chính thành viên trong gia đình. “CHĂM SÓC
                            TỐT HƠN – SỐNG KHỎE MẠNH HƠN” là điều chúng tôi muốn hướng đến cùng bạn, giúp bạn tận hưởng
                            trọn vẹn niềm vui cuộc sống với một nền sức khỏe vững chắc.
                        </div>
                        <div class="tab-pane fade" id="mission">
                            Phòng Khám Trung Thành luôn coi khách hàng là trọng tâm, chúng tôi luôn sẵn sàng chăm sóc
                            bạn ân cần.
                        </div>
                        <div class="tab-pane fade" id="achievement">
                            Năm 2000, 2001, 2007, 2008: Bộ Y tế tặng bằng khen; Từ 2002 - 2009 Bộ Y tế công nhận đạt
                            danh hiệu Bệnh viện xuất sắc toàn diện.
                        </div>
                    </div>
                    <img src="https://res.cloudinary.com/ouproject/image/upload/v1639921914/img/about/hc-signature_peu2hj.png"
                        alt="signature" />
                </div>
            </div>
        </div>
    </div>
</div>



    



    <div class="hc-team hc-spacer-top" id="team">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="hc-heading-wrap text-center">
                        <h2 class="hc-sub-heading">Đội ngũ bác sỹ</h2>
                        <h1 class="hc-heading">Chúng tôi rất hân hạnh phục vụ bạn</h1>
                    </div>
                </div>
                <div class="hc-team-tab-list text-center mb-4">
                    <button id="prev-btn" class="btn btn-outline-secondary">&gt;Trước</button>
                    <div id="filter-container" class="d-inline-block">
                    <button class="btn btn-outline-primary active" data-khoa-id="">Tất cả</button>
                    <button class="btn btn-outline-primary" data-khoa-id="1">Khoa Nội</button>
                    <button class="btn btn-outline-primary" data-khoa-id="2">Khoa Ngoại</button>
                    <button class="btn btn-outline-primary" data-khoa-id="3">Khoa Sản</button>
                    <button class="btn btn-outline-primary" data-khoa-id="4">Khoa Nhi</button>
                    <button class="btn btn-outline-primary" data-khoa-id="5">Khoa Da Liễu</button>
                    <button class="btn btn-outline-primary" data-khoa-id="6">Khoa Mắt</button>
                    <button class="btn btn-outline-primary" data-khoa-id="7">Khoa Tai Mũi Họng</button>
                    <button class="btn btn-outline-primary" data-khoa-id="8">Khoa Răng Hàm Mặt</button>
                    <button class="btn btn-outline-primary" data-khoa-id="9">Khoa Xét Nghiẹm</button>
                    <button class="btn btn-outline-primary" data-khoa-id="10">Khoa Chẩn Đoán Hình Ảnh</button>
                </div>
                <button id="next-btn" class="btn btn-outline-secondary">Tiếp &gt;</button>
                </div>
                
                <div class="col-lg-12">
                    <div class="row hc-team-grid justify-content-center" id="doctor_list"></div>
                    <ul class="pagination justify-content-center" id="pagination_doctor"></ul>
                </div>
            </div>
        </div>
    </div>
    <div class="hc-counter hc-spacer-top hc-spacer-bottom" id="counter">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="hc-heading-wrap text-center">
                        <h2 class="hc-sub-heading">Thành tựu</h2>
                        <h1 class="hc-heading">Vì sao nên lựa chọn chúng tôi ?</h1>
                    </div>
                </div>
            </div>
    
            <div class="hc-counter-wrap">
                <div class="row">
                    <div class="col-xl-3 col-md-6">
                        <div class="hc-counter-box">
                            <div class="hc-count-no">
                                <h2 class="counter-value" data-count='medical_amount'>0</h2>
                            </div>
                            <div class="hc-count-data">
                                <div class="hc-count-icon">
                                    <img src="https://res.cloudinary.com/ouproject/image/upload/v1639921909/img/counter/counter1_guvgpv.png" alt="counter" />
                                </div>
                                <div class="hc-count-head">
                                    <h2>Đ kí khám hằng tháng</h2>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6">
                        <div class="hc-counter-box">
                            <div class="hc-count-no">
                                <h2 class="counter-value" data-count='doctor_amount'>0</h2>
                            </div>
                            <div class="hc-count-data">
                                <div class="hc-count-icon">
                                    <img src="https://res.cloudinary.com/ouproject/image/upload/v1639921909/img/counter/counter2_ghqptl.png" alt="counter" />
                                </div>
                                <div class="hc-count-head">
                                    <h2>Bác sỹ đạt chuẩn</h2>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6">
                        <div class="hc-counter-box">
                            <div class="hc-count-no">
                                <h2 class="counter-value" data-count='nurse_amount'>0</h2>
                            </div>
                            <div class="hc-count-data">
                                <div class="hc-count-icon">
                                    <img src="https://res.cloudinary.com/ouproject/image/upload/v1639921909/img/counter/counter3_blqs28.png" alt="counter" />
                                </div>
                                <div class="hc-count-head">
                                    <h2>Y tá</h2>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6">
                        <div class="hc-counter-box">
                            <div class="hc-count-no">
                                <h2 class="counter-value" data-count='staff_amount'>0</h2>
                            </div>
                            <div class="hc-count-data">
                                <div class="hc-count-icon">
                                    <img src="https://res.cloudinary.com/ouproject/image/upload/v1639921909/img/counter/counter4_pqrhza.png" alt="counter" />
                                </div>
                                <div class="hc-count-head">
                                    <h2>Nhân viên</h2>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="hc-contact hc-spacer-high hc-spacer-bottom" id="contact">
        <div class="container">
            <div class="hc-heading-wrap text-center">
                <h2 class="hc-sub-heading">Liên hệ</h2>
                <h1 class="hc-heading">Phản hồi khách hàng</h1>
            </div>
            <div class="row">
                <div class="col-lg-5">
                    <div class="hc-contact-box">
                        <form>
                            <label for="customer_fullname">Họ và tên<span class="required-label">*</span></label>
                            <input type="text" id="customer_fullname" class="require form-control" placeholder="Nhập họ và tên" />
                            <label for="customer_email">Email<span class="required-label">*</span></label>
                            <input type="email" id="customer_email" class="require form-control" placeholder="Nhập email" />
                            <label for="feedback_subject">Tiêu đề<span class="required-label">*</span></label>
                            <input type="text" id="feedback_subject" class="require form-control" placeholder="Nhập tiêu đề" />
                            <label for="feedback_content">Lời nhắn<span class="required-label">*</span></label>
                            <textarea id="feedback_content" class="require form-control" placeholder="Nhập lời nhắn" rows="5"></textarea>
                        </form>
                        <button class="hc-btn btn-primary" id="feed_back_cfm">Xác nhận</button>
                    </div>
                </div>
                <div class="col-lg-7 mt-4">
                    <iframe
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3594.0338211616263!2d106.68809457462552!3d10.675404689467282!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31753100099ce9ed%3A0xdb6079801f0735ea!2zVHLGsOG7nW5nIMSQ4bqhaSBo4buNYyBN4bufIFRQLiBI4buTIENow60gTWluaCAoY8ahIHPhu58gMyk!5e1!3m2!1svi!2s!4v1734768833238!5m2!1svi!2s"                        width="100%" height="400px" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                </div>
            </div>
        </div>
    </div>
    

    <div class="hc-blog hc-spacer-top" id="blog">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="hc-heading-wrap text-center">
                        <h2 class="hc-sub-heading">Bài viết</h2>
                        <h1 class="hc-heading">Bài viết mới nhất</h1>
                    </div>
                </div>
    
                <div class="col-lg-4 col-md-6">
                    <div class="hc-blog-box">
                        <div class="hc-blog-img">
                            <a href="https://vnexpress.net/co-the-thay-doi-the-nao-neu-moi-ngay-chi-ngu-6-tieng-4830290.html"><img
                                    src="https://res.cloudinary.com/ouproject/image/upload/v1639921910/img/blog/blog1_silmb9.jpg"
                                    alt="blog" /></a>
                        </div>
                        <div class="hc-blog-data">
                            <div class="hc-blog-head">
                                <a href="https://vnexpress.net/co-the-thay-doi-the-nao-neu-moi-ngay-chi-ngu-6-tieng-4830290.html" class="hc-blog-date">23, Tháng 4 2021</a>
                            </div>
                            <a href="https://vnexpress.net/co-the-thay-doi-the-nao-neu-moi-ngay-chi-ngu-6-tieng-4830290.html">
                                <h1 class="hc-blog-title">
                                    Cơ thể thay đổi thế nào nếu mỗi ngày chỉ ngủ 6 tiếng
                                </h1>
                            </a>
                            <a href="https://vnexpress.net/co-the-thay-doi-the-nao-neu-moi-ngay-chi-ngu-6-tieng-4830290.html" class="hc-blog-more">Xem chi tiết <i
                                    class="fas fa-long-arrow-alt-right"></i></a>
                        </div>
                    </div>
                </div>
    
                <div class="col-lg-4 col-md-6">
                    <div class="hc-blog-box">
                        <div class="hc-blog-img">
                            <a href="https://vnexpress.net/an-gi-giam-nguy-co-ung-thu-4830371.html"><img
                                    src="https://res.cloudinary.com/ouproject/image/upload/v1639921912/img/blog/blog2_czazdq.jpg"
                                    alt="blog" /></a>
                        </div>
                        <div class="hc-blog-data">
                            <div class="hc-blog-head">
                                <a href="https://vnexpress.net/an-gi-giam-nguy-co-ung-thu-4830371.html" class="hc-blog-date">23, Tháng 4 2021</a>
                            </div>
                            <a href="https://vnexpress.net/an-gi-giam-nguy-co-ung-thu-4830371.html">
                                <h1 class="hc-blog-title">
                                    Ăn gì giảm nguy cơ ung thư?
                                </h1>
                            </a>
                            <a href="https://vnexpress.net/an-gi-giam-nguy-co-ung-thu-4830371.html" class="hc-blog-more">Xem chi tiết <i
                                    class="fas fa-long-arrow-alt-right"></i></a>
                        </div>
                    </div>
                </div>
    
                <div class="col-lg-4 col-md-6">
                    <div class="hc-blog-box">
                        <div class="hc-blog-img">
                            <a href="https://vnexpress.net/robot-tao-hinh-co-hoanh-cho-nguoi-benh-kho-tho-4829931.html"><img
                                    src="https://res.cloudinary.com/ouproject/image/upload/v1639921914/img/blog/blog3_g1pgan.jpg"
                                    alt="blog" /></a>
                        </div>
                        <div class="hc-blog-data">
                            <div class="hc-blog-head">
                                <a href="https://vnexpress.net/robot-tao-hinh-co-hoanh-cho-nguoi-benh-kho-tho-4829931.html" class="hc-blog-date">23, Tháng 4 2021</a>
                            </div>
                            <a href="https://vnexpress.net/robot-tao-hinh-co-hoanh-cho-nguoi-benh-kho-tho-4829931.html">
                                <h1 class="hc-blog-title">
                                    Robot tạo hình cơ hoành cho người bệnh khó thở
                                </h1>
                            </a>
                            <a href="https://vnexpress.net/robot-tao-hinh-co-hoanh-cho-nguoi-benh-kho-tho-4829931.html" class="hc-blog-more">Xem chi tiết <i
                                    class="fas fa-long-arrow-alt-right"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
     


    <!-- Bootstrap JavaScript và Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function(){
            $(".toggle-btn").click(function(){
                // Đóng tất cả câu trả lời
                $(".answer-container").slideUp();
                $(".toggle-btn").text("+");
                
                // Nếu câu trả lời chưa mở, mở nó và thay đổi dấu
                var answerContainer = $(this).next(".answer-container");
                if (answerContainer.is(":hidden")) {
                    $(this).text("-");
                    answerContainer.slideDown();
                }
            });
        });
    </script>
    <script>
        // Script xử lý câu hỏi và câu trả lời
        document.addEventListener("DOMContentLoaded", function () {
            const toggleButtons = document.querySelectorAll(".toggle-btn");
            toggleButtons.forEach(button => {
                button.addEventListener("click", function () {
                    // Đóng tất cả các câu trả lời khác
                    document.querySelectorAll(".answer-container").forEach(answer => {
                        answer.style.display = "none";
                    });
                    document.querySelectorAll(".toggle-btn").forEach(btn => {
                        btn.textContent = "+";
                    });
    
                    // Mở câu trả lời liên quan nếu đang bị ẩn
                    const answerContainer = this.nextElementSibling;
                    if (answerContainer.style.display === "none" || answerContainer.style.display === "") {
                        answerContainer.style.display = "block";
                        this.textContent = "-";
                    }
                });
            });
        });
    </script>
    
    <script>
            // Định nghĩa hàm fetchDoctors trước
            function fetchDoctors(page = 1, khoaId = "") {
                console.log(`Fetching doctors for khoaId: ${khoaId}, page: ${page}`);
                fetch(`/api/doctors?page=${page}&per_page=5&khoa_id=${khoaId}`)
                    .then(response => response.json())
                    .then(data => {
                        const doctorList = document.getElementById("doctor_list");
                        const pagination = document.getElementById("pagination_doctor");
        
                        doctorList.innerHTML = "";
                        pagination.innerHTML = "";
        
                        data.doctors.forEach(doctor => {
                            const doctorItem = document.createElement("div");
                            doctorItem.className = "col-md-4 text-center";
                            doctorItem.innerHTML = `
                                <div class="hc-team-member">
                                    <img src="${doctor.avatar}" alt="${doctor.ho_ten}" class="img-fluid rounded-circle" style="width: 120px; height: 120px; object-fit: cover;">
                                    <h3>${doctor.ho} ${doctor.ten}</h3>
                                    <p>Khoa: ${doctor.khoa}</p>
                                </div>
                            `;
                            doctorList.appendChild(doctorItem);
                        });
        
                        if (data.total > 5) {
                            for (let i = 1; i <= data.pages; i++) {
                                const pageItem = document.createElement("li");
                                pageItem.className = `page-item ${i === data.current_page ? "active" : ""}`;
                                pageItem.innerHTML = `<a class="page-link" href="#">${i}</a>`;
                                pageItem.querySelector("a").addEventListener("click", function (e) {
                                    e.preventDefault();
                                    fetchDoctors(i, khoaId);
                                });
                                pagination.appendChild(pageItem);
                            }
                        }
                    })
                    .catch(error => console.error("Lỗi khi tải dữ liệu:", error));
            }
        
             //Gán sự kiện click cho các nút khoa
            document.addEventListener("DOMContentLoaded", function () {
                const filterButtons = document.querySelectorAll(".hc-team-tab-list button");
                filterButtons.forEach(button => {
                    button.addEventListener("click", function () {
                        const khoaId = this.getAttribute("data-khoa-id") || "";
                        console.log(`Button clicked. KhoaId: ${khoaId}`);
                        filterButtons.forEach(btn => btn.classList.remove("active"));
                        this.classList.add("active");
                        fetchDoctors(1, khoaId);
                    });
                });
        
                // Gọi API lần đầu để hiển thị tất cả bác sĩ
                fetchDoctors();
            });
        
        document.addEventListener("DOMContentLoaded", function () {
            const khoaData = [
                { id: "", name: "Tất cả" },
                { id: "1", name: "Khoa Nội" },
                { id: "2", name: "Khoa Ngoại" },
                { id: "3", name: "Khoa Sản" },
                { id: "4", name: "Khoa Nhi" },
                { id: "5", name: "Khoa Da Liễu" },
                { id: "6", name: "Khoa Mắt" },
                { id: "7", name: "Khoa Tai Mũi Họng" },
                { id: "8", name: "Khoa Răng Hàm Mặt" },
                { id: "9", name: "Khoa Xét Nghiệm" },
                { id: "10", name: "Khoa Chẩn Đoán Hình Ảnh" }
            ];
        
            const filterContainer = document.getElementById("filter-container");
            const prevBtn = document.getElementById("prev-btn");
            const nextBtn = document.getElementById("next-btn");
        
            let currentIndex = 0; // Vị trí hiện tại trong danh sách khoa
            const itemsPerPage = 5; // Số mục hiển thị tối đa
        
            function renderFilters() {
                filterContainer.innerHTML = ""; // Xóa nội dung cũ
                const visibleItems = khoaData.slice(currentIndex, currentIndex + itemsPerPage);
            
                visibleItems.forEach(khoa => {
                    const button = document.createElement("button");
                    button.className = "btn btn-outline-primary mx-1";
                    button.setAttribute("data-khoa-id", khoa.id);
                    button.textContent = khoa.name;
            
                    // Sự kiện khi bấm vào nút khoa
                    button.addEventListener("click", function () {
                        // Đổi trạng thái nút active
                        document.querySelectorAll(".btn-outline-primary").forEach(btn => btn.classList.remove("active"));
                        button.classList.add("active");
            
                        // Lấy id của khoa và gọi API fetchDoctors
                        const khoaId = button.getAttribute("data-khoa-id");
                        fetchDoctors(1, khoaId); // Gọi API lọc bác sĩ theo khoa
                    });
            
                    filterContainer.appendChild(button);
                });
            }
            
        
            // Nút "Tiếp"
            nextBtn.addEventListener("click", function () {
                if (currentIndex + itemsPerPage < khoaData.length) {
                    currentIndex += itemsPerPage;
                    filterContainer.classList.add("filter-slide");
                    setTimeout(() => {
                        filterContainer.classList.remove("filter-slide");
                        renderFilters();
                    }, 200); // Delay để trượt mượt
                }
            });
        
            // Nút "Trước"
            prevBtn.addEventListener("click", function () {
                if (currentIndex - itemsPerPage >= 0) {
                    currentIndex -= itemsPerPage;
                    filterContainer.classList.add("filter-slide");
                    setTimeout(() => {
                        filterContainer.classList.remove("filter-slide");
                        renderFilters();
                    }, 200);
                }
            });
        
            // Gọi render lần đầu
            renderFilters();
        });
        
        // Gọi API để lấy dữ liệu thống kê
            fetch('/api/counter')
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    document.querySelector('[data-count="medical_amount"]').innerText = data.counter.medical_amount;
                    document.querySelector('[data-count="doctor_amount"]').innerText = data.counter.doctor_amount;
                    document.querySelector('[data-count="nurse_amount"]').innerText = data.counter.nurse_amount;
                    document.querySelector('[data-count="staff_amount"]').innerText = data.counter.staff_amount;
                } else {
                    console.error('Lỗi khi lấy dữ liệu: ', data.message);
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });

    </script>

    
    {%endblock%}

