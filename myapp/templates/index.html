{%extends 'layout/base.html'%}
{%block content%}

<!-- Hero Section -->
<div class="hc-banner">
    <div class="container">
        <div class="row">
            <div class="col-lg-5">
                <div class="hc-banner-content">
                    <h2 class="wow fadeInUp" data-wow-duration="1.3s" data-wow-delay="0.2s">Phòng mạch Trung
                        Thành
                    </h2>
                    <h1 class="wow fadeInUp" data-wow-duration="1.3s" data-wow-delay="0.5s">Đặt lịch hẹn trực
                        tuyến với bác sỹ chuyên gia</h1>
                    <div class="hc-banner-box wow fadeInUp" data-wow-duration="1.3s" data-wow-delay="0.8s">
                        <p>
                            Thành lập năm 2010, Phòng Khám Medic Dĩ An tự hào là thương hiệu phòng khám có bề dầy 10 năm
                            kinh nghiệm chăm sóc và phục vụ khách hàng.
                        </p>
                    </div>
                    <a href="javascript:;" class="hc-btn wow fadeInUp" data-wow-duration="1.3s" data-wow-delay="1s">Tìm
                        hiểu thêm</a>
                </div>
            </div>

            <div class="col-lg-7">
                <div class="hc-banner-img">
                    <img src="https://res.cloudinary.com/ouweb/image/upload/v1734447050/webpython/odhm6sm9nffosvptqq1i.jpg"
                        alt="image" />
                </div>
            </div>
        </div>

        <div class="hc-banner-shape">
            <span></span>
        </div>
    </div>
</div>




    

    <!-- Services Section -->
    <section class="bg-primary text-white py-5">
        <div class="container text-center">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <div class="service-card p-4 rounded">
                        <i class="bi bi-display"></i>
                        <h4 class="mt-3">Primary Care</h4>
                        <p>An so vulgar to on points wanted rapture resolving continued household.</p>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="service-card p-4 rounded">
                        <i class="bi bi-heart-pulse"></i>
                        <h4 class="mt-3">Emergency Cases</h4>
                        <p>An so vulgar to on points wanted rapture resolving continued household.</p>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="service-card p-4 rounded">
                        <i class="bi bi-calendar-check"></i>
                        <h4 class="mt-3">Online Appointment</h4>
                        <p>An so vulgar to on points wanted rapture resolving continued household.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="hc-team hc-spacer-top" id="team">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="hc-heading-wrap text-center">
                        <h2 class="hc-sub-heading">Đội ngũ bác sỹ</h2>
                        <h1 class="hc-heading">Chúng tôi rất hân hạnh phục vụ bạn</h1>
                    </div>
                </div>
                <div class="hc-team-tab-list text-center mb-4">
                    <button id="prev-btn" class="btn btn-outline-secondary">&gt;Trước</button>
                    <div id="filter-container" class="d-inline-block">
                    <button class="btn btn-outline-primary active" data-khoa-id="">Tất cả</button>
                    <button class="btn btn-outline-primary" data-khoa-id="1">Khoa Nội</button>
                    <button class="btn btn-outline-primary" data-khoa-id="2">Khoa Ngoại</button>
                    <button class="btn btn-outline-primary" data-khoa-id="3">Khoa Sản</button>
                    <button class="btn btn-outline-primary" data-khoa-id="4">Khoa Nhi</button>
                    <button class="btn btn-outline-primary" data-khoa-id="5">Khoa Da Liễu</button>
                    <button class="btn btn-outline-primary" data-khoa-id="6">Khoa Mắt</button>
                    <button class="btn btn-outline-primary" data-khoa-id="7">Khoa Tai Mũi Họng</button>
                    <button class="btn btn-outline-primary" data-khoa-id="8">Khoa Răng Hàm Mặt</button>
                    <button class="btn btn-outline-primary" data-khoa-id="9">Khoa Xét Nghiẹm</button>
                    <button class="btn btn-outline-primary" data-khoa-id="10">Khoa Chẩn Đoán Hình Ảnh</button>
                </div>
                <button id="next-btn" class="btn btn-outline-secondary">Tiếp &gt;</button>
                </div>
                
                <div class="col-lg-12">
                    <div class="row hc-team-grid justify-content-center" id="doctor_list"></div>
                    <ul class="pagination justify-content-center" id="pagination_doctor"></ul>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="row">
            <!-- Cột bên trái - Câu hỏi sức khỏe -->
            <div class="col-md-6">
                <div class="question-container">
                        <strong>1. Một ngày bạn cần uống bao nhiêu lít nước?</strong>
                        <span class="toggle-btn">+</span>
                        <div id="answer1" class="answer-container">
                            <p>Trung bình một người trưởng thành cần uống khoảng 2-3 lít nước mỗi ngày.</p>
                        </div>
                </div>
                <div class="question-container">
                        <strong>2. Bạn có thường xuyên tập thể dục không?</strong>
                        <span class="toggle-btn">+</span>
                        <div id="answer2" class="answer-container">
                            <p>Tập thể dục đều đặn giúp cải thiện sức khỏe tim mạch và giảm nguy cơ mắc bệnh mãn tính.</p>
                        </div>
                </div>
                <div class="question-container">
                        <strong>3. Bạn có tiền sử bệnh lý nào không?</strong>
                        <span class="toggle-btn">+</span>
                        <div id="answer3" class="answer-container">
                            <p>Cung cấp thông tin về tiền sử bệnh lý giúp bác sĩ chẩn đoán và đưa ra phương pháp điều trị phù hợp.</p>
                        </div>
                </div>
                <div class="question-container">
                        <strong>4. Bạn có đang sử dụng thuốc nào không?</strong>
                        <span class="toggle-btn">+</span>
                        <div id="answer4" class="answer-container">
                            <p>Thông tin về thuốc đang sử dụng sẽ giúp bác sĩ tránh tương tác thuốc và đưa ra chỉ định phù hợp.</p>
                        </div>
                    </div>
            </div>
    
            <!-- Cột bên phải - Form đăng ký khám bệnh -->
            <div class="col-md-6">
                <div class="form-container">
                    <h4>Đăng Ký Khám Bệnh</h4>
                    <form>
                        <div class="mb-3">
                            <label for="patientName" class="form-label">Tên Bệnh Nhân</label>
                            <input type="text" class="form-control" id="patientName" placeholder="Nhập tên bệnh nhân" required>
                        </div>
                        <div class="mb-3">
                            <label for="age" class="form-label">Số Tuổi</label>
                            <input type="number" class="form-control" id="age" placeholder="Nhập số tuổi" required>
                        </div>
                        <div class="mb-3">
                            <label for="dob" class="form-label">Ngày Sinh</label>
                            <input type="date" class="form-control" id="dob" required>
                        </div>
                        <div class="mb-3">
                            <label for="phone" class="form-label">Số Điện Thoại</label>
                            <input type="tel" class="form-control" id="phone" placeholder="Nhập số điện thoại" required>
                        </div>
                        <div class="mb-3">
                            <label for="appointmentDate" class="form-label">Chọn Ngày Khám</label>
                            <input type="date" class="form-control" id="appointmentDate" required>
                        </div>
                        <div class="mb-3">
                            <label for="doctor" class="form-label">Chọn Bác Sĩ</label>
                            <select class="form-select" id="doctor" required>
                                <option value="doctorA">Bác Sĩ A</option>
                                <option value="doctorB">Bác Sĩ B</option>
                                <option value="doctorC">Bác Sĩ C</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary">Đăng Ký</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
     


    <!-- Bootstrap JavaScript và Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function(){
            $(".toggle-btn").click(function(){
                // Đóng tất cả câu trả lời
                $(".answer-container").slideUp();
                $(".toggle-btn").text("+");
                
                // Nếu câu trả lời chưa mở, mở nó và thay đổi dấu
                var answerContainer = $(this).next(".answer-container");
                if (answerContainer.is(":hidden")) {
                    $(this).text("-");
                    answerContainer.slideDown();
                }
            });
        });
    </script>
    <script>
        // Script xử lý câu hỏi và câu trả lời
        document.addEventListener("DOMContentLoaded", function () {
            const toggleButtons = document.querySelectorAll(".toggle-btn");
            toggleButtons.forEach(button => {
                button.addEventListener("click", function () {
                    // Đóng tất cả các câu trả lời khác
                    document.querySelectorAll(".answer-container").forEach(answer => {
                        answer.style.display = "none";
                    });
                    document.querySelectorAll(".toggle-btn").forEach(btn => {
                        btn.textContent = "+";
                    });
    
                    // Mở câu trả lời liên quan nếu đang bị ẩn
                    const answerContainer = this.nextElementSibling;
                    if (answerContainer.style.display === "none" || answerContainer.style.display === "") {
                        answerContainer.style.display = "block";
                        this.textContent = "-";
                    }
                });
            });
        });
    </script>
    
    <script>
            // Định nghĩa hàm fetchDoctors trước
            function fetchDoctors(page = 1, khoaId = "") {
                console.log(`Fetching doctors for khoaId: ${khoaId}, page: ${page}`);
                fetch(`/api/doctors?page=${page}&per_page=5&khoa_id=${khoaId}`)
                    .then(response => response.json())
                    .then(data => {
                        const doctorList = document.getElementById("doctor_list");
                        const pagination = document.getElementById("pagination_doctor");
        
                        doctorList.innerHTML = "";
                        pagination.innerHTML = "";
        
                        data.doctors.forEach(doctor => {
                            const doctorItem = document.createElement("div");
                            doctorItem.className = "col-md-4 text-center";
                            doctorItem.innerHTML = `
                                <div class="hc-team-member">
                                    <img src="${doctor.avatar}" alt="${doctor.ho_ten}" class="img-fluid rounded-circle" style="width: 120px; height: 120px; object-fit: cover;">
                                    <h3>${doctor.ho_ten}</h3>
                                    <p>Khoa: ${doctor.khoa}</p>
                                </div>
                            `;
                            doctorList.appendChild(doctorItem);
                        });
        
                        if (data.total > 5) {
                            for (let i = 1; i <= data.pages; i++) {
                                const pageItem = document.createElement("li");
                                pageItem.className = `page-item ${i === data.current_page ? "active" : ""}`;
                                pageItem.innerHTML = `<a class="page-link" href="#">${i}</a>`;
                                pageItem.querySelector("a").addEventListener("click", function (e) {
                                    e.preventDefault();
                                    fetchDoctors(i, khoaId);
                                });
                                pagination.appendChild(pageItem);
                            }
                        }
                    })
                    .catch(error => console.error("Lỗi khi tải dữ liệu:", error));
            }
        
             //Gán sự kiện click cho các nút khoa
            document.addEventListener("DOMContentLoaded", function () {
                const filterButtons = document.querySelectorAll(".hc-team-tab-list button");
                filterButtons.forEach(button => {
                    button.addEventListener("click", function () {
                        const khoaId = this.getAttribute("data-khoa-id") || "";
                        console.log(`Button clicked. KhoaId: ${khoaId}`);
                        filterButtons.forEach(btn => btn.classList.remove("active"));
                        this.classList.add("active");
                        fetchDoctors(1, khoaId);
                    });
                });
        
                // Gọi API lần đầu để hiển thị tất cả bác sĩ
                fetchDoctors();
            });
        
        document.addEventListener("DOMContentLoaded", function () {
            const khoaData = [
                { id: "", name: "Tất cả" },
                { id: "1", name: "Khoa Nội" },
                { id: "2", name: "Khoa Ngoại" },
                { id: "3", name: "Khoa Sản" },
                { id: "4", name: "Khoa Nhi" },
                { id: "5", name: "Khoa Da Liễu" },
                { id: "6", name: "Khoa Mắt" },
                { id: "7", name: "Khoa Tai Mũi Họng" },
                { id: "8", name: "Khoa Răng Hàm Mặt" },
                { id: "9", name: "Khoa Xét Nghiệm" },
                { id: "10", name: "Khoa Chẩn Đoán Hình Ảnh" }
            ];
        
            const filterContainer = document.getElementById("filter-container");
            const prevBtn = document.getElementById("prev-btn");
            const nextBtn = document.getElementById("next-btn");
        
            let currentIndex = 0; // Vị trí hiện tại trong danh sách khoa
            const itemsPerPage = 5; // Số mục hiển thị tối đa
        
            function renderFilters() {
                filterContainer.innerHTML = ""; // Xóa nội dung cũ
                const visibleItems = khoaData.slice(currentIndex, currentIndex + itemsPerPage);
            
                visibleItems.forEach(khoa => {
                    const button = document.createElement("button");
                    button.className = "btn btn-outline-primary mx-1";
                    button.setAttribute("data-khoa-id", khoa.id);
                    button.textContent = khoa.name;
            
                    // Sự kiện khi bấm vào nút khoa
                    button.addEventListener("click", function () {
                        // Đổi trạng thái nút active
                        document.querySelectorAll(".btn-outline-primary").forEach(btn => btn.classList.remove("active"));
                        button.classList.add("active");
            
                        // Lấy id của khoa và gọi API fetchDoctors
                        const khoaId = button.getAttribute("data-khoa-id");
                        fetchDoctors(1, khoaId); // Gọi API lọc bác sĩ theo khoa
                    });
            
                    filterContainer.appendChild(button);
                });
            }
            
        
            // Nút "Tiếp"
            nextBtn.addEventListener("click", function () {
                if (currentIndex + itemsPerPage < khoaData.length) {
                    currentIndex += itemsPerPage;
                    filterContainer.classList.add("filter-slide");
                    setTimeout(() => {
                        filterContainer.classList.remove("filter-slide");
                        renderFilters();
                    }, 200); // Delay để trượt mượt
                }
            });
        
            // Nút "Trước"
            prevBtn.addEventListener("click", function () {
                if (currentIndex - itemsPerPage >= 0) {
                    currentIndex -= itemsPerPage;
                    filterContainer.classList.add("filter-slide");
                    setTimeout(() => {
                        filterContainer.classList.remove("filter-slide");
                        renderFilters();
                    }, 200);
                }
            });
        
            // Gọi render lần đầu
            renderFilters();
        });
        
        
    </script>

    
    {%endblock%}

